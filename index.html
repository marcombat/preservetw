<!DOCTYPE html>
<html>
<head>
	<title>Twitter Profile URLs</title>
</head>
<body>
	<label for="twitter-url">Insira a URL do perfil do Twitter ou o nome de usuário: </label>
	<input type="text" id="twitter-url" name="twitter-url">
	<button onclick="generateUrls()">Gerar URLs</button>

	<div id="urls"></div>

	<div id="preserved-urls">
		<h2>URLs preservadas</h2>
		<div id="web-archive"></div>
		<div id="archive-today"></div>
	</div>

	<script>
		function generateUrls() {
			const input = document.getElementById("twitter-url").value;
			const parsedUrl = new URL(input);
			let username, twitterProfileLink;

			if (parsedUrl.protocol && parsedUrl.hostname && parsedUrl.pathname.startsWith("/")) {
				// a entrada é uma URL completa
				twitterProfileLink = input;
				username = parsedUrl.pathname.split("/")[1];
			} else {
				// a entrada é um nome de usuário
				username = input;
				twitterProfileLink = `https://twitter.com/${username}`;
			}

			const profileUrl = `https://twitter.com/${username}`;
			const withRepliesUrl = `https://twitter.com/${username}/with_replies`;
			const mediaUrl = `https://twitter.com/${username}/media`;
			const likesUrl = `https://twitter.com/${username}/likes`;
			const followingUrl = `https://twitter.com/${username}/following`;
			const followersUrl = `https://twitter.com/${username}/followers`;

			const urls = [profileUrl, withRepliesUrl, mediaUrl, likesUrl, followingUrl, followersUrl];
			const sites = {
			    "Web Archive": "https://web.archive.org/save/",
			    "Archive.today": "https://archive.today/?run=1&url="
			};

			let urlsHtml = "<h2>URLs Principais:</h2>";
			urls.forEach(url => {
				urlsHtml += `<p>${url}</p>`;
			});

			document.getElementById("urls").innerHTML = urlsHtml;

			let preservedUrlsHtml = "";
			for (const [site, baseUrl] of Object.entries(sites)) {
				preservedUrlsHtml += `<h3>${site}:</h3>`;
				urls.forEach(url => {
					preservedUrl = baseUrl + url;
					preservedUrlsHtml += `<p>${preservedUrl}</p>`;
				});
			}

			document.getElementById("web-archive").innerHTML = preservedUrlsHtml;

		}
	</script>
</body>
</html>
